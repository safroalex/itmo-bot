#!/opt/anaconda3/envs/itmo-bot/bin/python
import requests
import json
import time

# URL API Ð²Ð°ÑˆÐµÐ³Ð¾ Ð±Ð¾Ñ‚Ð°
BOT_URL = "http://localhost:8081/api/request"

# ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ñ‚ÐµÑÑ‚Ð¾Ð² Ð´Ð»Ñ Ð¸ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ (Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ = Ð²ÑÐµ)
NUM_TESTS = 17  # Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ñ‡Ð¸ÑÐ»Ð¾, ÐµÑÐ»Ð¸ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ð¼ÐµÐ½ÑŒÑˆÐµ Ñ‚ÐµÑÑ‚Ð¾Ð²

# Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ñ Ð¾Ð¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ð¼Ð¸ Ð¾Ñ‚Ð²ÐµÑ‚Ð°Ð¼Ð¸
test_cases = [
    {
        "id": 1,
        "query": (
            "Ð’ ÐºÐ°ÐºÐ¾Ð¼ Ð³Ð¾Ð´Ñƒ Ð±Ñ‹Ð» Ð¾ÑÐ½Ð¾Ð²Ð°Ð½ Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚ Ð˜Ð¢ÐœÐž?\n"
            "1. 1900\n"
            "2. 1905\n"
            "3. 1918\n"
            "4. 1930"
        ),
        "expected_answer": 1  # 1900
    },
    {
        "id": 2,
        "query": (
            "ÐšÐ°ÐºÐ¾Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð½Ð¾ÑÐ¸Ð» Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚ Ð˜Ð¢ÐœÐž Ð² ÑÐ¾Ð²ÐµÑ‚ÑÐºÐ¾Ðµ Ð²Ñ€ÐµÐ¼Ñ?\n"
            "1. Ð›ÐµÐ½Ð¸Ð½Ð³Ñ€Ð°Ð´ÑÐºÐ¸Ð¹ Ð¸Ð½ÑÑ‚Ð¸Ñ‚ÑƒÑ‚ Ñ‚Ð¾Ñ‡Ð½Ð¾Ð¹ Ð¼ÐµÑ…Ð°Ð½Ð¸ÐºÐ¸ Ð¸ Ð¾Ð¿Ñ‚Ð¸ÐºÐ¸ (Ð›Ð˜Ð¢ÐœÐž)\n"
            "2. Ð˜Ð½ÑÑ‚Ð¸Ñ‚ÑƒÑ‚ Ð²Ñ‹ÑÐ¾ÐºÐ¾Ñ‚Ð¾Ñ‡Ð½Ñ‹Ñ… ÑÐ¸ÑÑ‚ÐµÐ¼ (Ð˜Ð’Ð¡)\n"
            "3. Ð›ÐµÐ½Ð¸Ð½Ð³Ñ€Ð°Ð´ÑÐºÐ¸Ð¹ Ð¸Ð½ÑÑ‚Ð¸Ñ‚ÑƒÑ‚ Ð²Ñ‹Ñ‡Ð¸ÑÐ»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð¹ Ñ‚ÐµÑ…Ð½Ð¸ÐºÐ¸ (Ð›Ð˜Ð’Ð¢)\n"
            "4. ÐŸÐµÑ‚Ñ€Ð¾Ð³Ñ€Ð°Ð´ÑÐºÐ¸Ð¹ Ð¸Ð½ÑÑ‚Ð¸Ñ‚ÑƒÑ‚ Ð¼ÐµÑ…Ð°Ð½Ð¸ÐºÐ¸ Ð¸ Ð¾Ð¿Ñ‚Ð¸ÐºÐ¸ (ÐŸÐ˜ÐœÐž)"
        ),
        "expected_answer": 1  # Ð›Ð˜Ð¢ÐœÐž
    },
    {
        "id": 3,
        "query": (
            "Ð’ ÐºÐ°ÐºÐ¾Ð¹ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð½Ð¾Ð¹ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸ (ÑÐ¾Ð³Ð»Ð°ÑÐ½Ð¾ Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ñƒ QS by Subject 2022) "
            "Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚ Ð˜Ð¢ÐœÐž Ð²Ñ…Ð¾Ð´Ð¸Ñ‚ Ð² Ñ‚Ð¾Ð¿-100?\n"
            "1. Computer Science & Information Systems\n"
            "2. Physics & Astronomy\n"
            "3. Mathematics\n"
            "4. Engineering - Electrical & Electronic"
        ),
        "expected_answer": 1  # Computer Science & Information Systems
    },
    {
        "id": 4,
        "query": (
            "Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¼ÐµÐ³Ð°Ñ„Ð°ÐºÑƒÐ»ÑŒÑ‚ÐµÑ‚Ð¾Ð² Ð´ÐµÐ¹ÑÑ‚Ð²ÑƒÐµÑ‚ Ð² Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚Ðµ Ð˜Ð¢ÐœÐž?\n"
            "1. 3\n"
            "2. 4\n"
            "3. 5\n"
            "4. 6"
        ),
        "expected_answer": 3  # 5 Ð¼ÐµÐ³Ð°Ñ„Ð°ÐºÑƒÐ»ÑŒÑ‚ÐµÑ‚Ð¾Ð²
    },
    {
        "id": 5,
        "query": (
            "Ð’ ÐºÐ°ÐºÐ¾Ð¼ Ñ€Ð°Ð¹Ð¾Ð½Ðµ Ð¡Ð°Ð½ÐºÑ‚-ÐŸÐµÑ‚ÐµÑ€Ð±ÑƒÑ€Ð³Ð° Ñ€Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½ Ð³Ð»Ð°Ð²Ð½Ñ‹Ð¹ ÐºÐ¾Ñ€Ð¿ÑƒÑ Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚Ð° Ð˜Ð¢ÐœÐž "
            "Ð½Ð° ÐšÑ€Ð¾Ð½Ð²ÐµÑ€ÐºÑÐºÐ¾Ð¼ Ð¿Ñ€Ð¾ÑÐ¿ÐµÐºÑ‚Ðµ, 49?\n"
            "1. ÐÐ´Ð¼Ð¸Ñ€Ð°Ð»Ñ‚ÐµÐ¹ÑÐºÐ¸Ð¹ Ñ€Ð°Ð¹Ð¾Ð½\n"
            "2. ÐŸÐµÑ‚Ñ€Ð¾Ð³Ñ€Ð°Ð´ÑÐºÐ¸Ð¹ Ñ€Ð°Ð¹Ð¾Ð½\n"
            "3. Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ€Ð°Ð¹Ð¾Ð½\n"
            "4. Ð’Ð°ÑÐ¸Ð»ÐµÐ¾ÑÑ‚Ñ€Ð¾Ð²ÑÐºÐ¸Ð¹ Ñ€Ð°Ð¹Ð¾Ð½"
        ),
        "expected_answer": 2  # ÐŸÐµÑ‚Ñ€Ð¾Ð³Ñ€Ð°Ð´ÑÐºÐ¸Ð¹ Ñ€Ð°Ð¹Ð¾Ð½
    },
    {
        "id": 6,
        "query": (
            "ÐšÐ°ÐºÐ°Ñ Ð¸Ð· Ð¿ÐµÑ€ÐµÑ‡Ð¸ÑÐ»ÐµÐ½Ð½Ñ‹Ñ… Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼ Ð² Ð˜Ð¢ÐœÐž ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ÑÑ "
            "Ð½Ð° Ð´Ð¸Ð·Ð°Ð¹Ð½Ðµ Ð¸ Ð¼ÑƒÐ»ÑŒÑ‚Ð¸Ð¼ÐµÐ´Ð¸Ð°?\n"
            "1. Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð°Ñ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ\n"
            "2. Ð¥Ð¸Ð¼Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð±Ð¸Ð¾Ð»Ð¾Ð³Ð¸Ñ\n"
            "3. Technological Art & Design\n"
            "4. ÐšÐ¸Ð±ÐµÑ€Ñ„Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹"
        ),
        "expected_answer": 3  # Technological Art & Design
    },
    {
        "id": 7,
        "query": (
            "ÐšÐ°Ðº Ð½Ð°Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð±Ð¸Ð·Ð½ÐµÑ-Ð°ÐºÑÐµÐ»ÐµÑ€Ð°Ñ‚Ð¾Ñ€, ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¸ Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚Ðµ Ð˜Ð¢ÐœÐž?\n"
            "1. Future Technologies\n"
            "2. IIDF (Ð¤Ð Ð˜Ð˜)\n"
            "3. ITMO Accelerator\n"
            "4. Skolkovo"
        ),
        "expected_answer": 3  # ITMO Accelerator
    },
    {
        "id": 8,
        "query": (
            "ÐšÐ°ÐºÐ¾Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚ Ð˜Ð¢ÐœÐž Ð¸Ð¼ÐµÐ» Ð² Ñ€Ð°Ð¼ÐºÐ°Ñ… Ð³Ð¾ÑÑƒÐ´Ð°Ñ€ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ð¹ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ñ‚Ð¸Ð²Ñ‹ Â«ÐŸÑ€Ð¾ÐµÐºÑ‚ 5-100Â»?\n"
            "1. Ð›Ð¸Ð´ÐµÑ€\n"
            "2. Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸Ðº\n"
            "3. Ð­ÐºÑÐ¿ÐµÑ€Ñ‚\n"
            "4. ÐÐµ ÑƒÑ‡Ð°ÑÑ‚Ð²Ð¾Ð²Ð°Ð»"
        ),
        "expected_answer": 2  # Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸Ðº
    },
    {
        "id": 9,
        "query": (
            "Ðš ÐºÐ°ÐºÐ¾Ð¼Ñƒ Ð¼Ð¸Ð½Ð¸ÑÑ‚ÐµÑ€ÑÑ‚Ð²Ñƒ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÑÑ Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚ Ð˜Ð¢ÐœÐž?\n"
            "1. ÐœÐ¸Ð½Ð¸ÑÑ‚ÐµÑ€ÑÑ‚Ð²Ð¾ ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ñ‹ Ð Ð¤\n"
            "2. ÐœÐ¸Ð½Ð¸ÑÑ‚ÐµÑ€ÑÑ‚Ð²Ð¾ Ð½Ð°ÑƒÐºÐ¸ Ð¸ Ð²Ñ‹ÑÑˆÐµÐ³Ð¾ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð Ð¤\n"
            "3. ÐœÐ¸Ð½Ð¸ÑÑ‚ÐµÑ€ÑÑ‚Ð²Ð¾ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð² Ð Ð¤\n"
            "4. ÐœÐ¸Ð½Ð¸ÑÑ‚ÐµÑ€ÑÑ‚Ð²Ð¾ Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ð¾Ð³Ð¾ Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸Ñ Ð Ð¤"
        ),
        "expected_answer": 2  # ÐœÐ¸Ð½Ð¾Ð±Ñ€Ð½Ð°ÑƒÐºÐ¸ Ð Ð¤
    },
    {
        "id": 10,
        "query": (
            "ÐšÐ°Ðº Ð½Ð°Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ ÑƒÐ½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚ÑÐºÐ°Ñ Ð¼ÐµÐ´Ð¸Ð°-Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð° (Ð¾Ð½Ð»Ð°Ð¹Ð½-Ð¸Ð·Ð´Ð°Ð½Ð¸Ðµ) Ð˜Ð¢ÐœÐž?\n"
            "1. ITMO.News\n"
            "2. GO ITMO\n"
            "3. ITMO Media\n"
            "4. ITMO Journal"
        ),
        "expected_answer": 1  # ITMO.News
    },
    {
        "id": 11,
        "query": (
            "Ð’ ÐºÐ°ÐºÐ¾Ð¼ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¸ Ð½Ð°ÑƒÑ‡Ð½Ñ‹Ñ… Ð¸ÑÑÐ»ÐµÐ´Ð¾Ð²Ð°Ð½Ð¸Ð¹ Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚ Ð˜Ð¢ÐœÐž Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ ÑÐ¸Ð»Ñ‘Ð½, "
            "ÑÐ¾Ð³Ð»Ð°ÑÐ½Ð¾ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¼ Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ð°Ð¼?\n"
            "1. ÐÐµÐ¹Ñ€Ð¾Ð±Ð¸Ð¾Ð»Ð¾Ð³Ð¸Ñ\n"
            "2. Ð¤Ð¾Ñ‚Ð¾Ð½Ð¸ÐºÐ°\n"
            "3. Ð“ÐµÐ¾Ð»Ð¾Ð³Ð¸Ñ\n"
            "4. Ð¡Ð¾Ñ†Ð¸Ð¾Ð»Ð¾Ð³Ð¸Ñ"
        ),
        "expected_answer": 2  # Ð¤Ð¾Ñ‚Ð¾Ð½Ð¸ÐºÐ°
    },
    {
        "id": 12,
        "query": (
            "ÐšÐ°Ðº Ð½Ð°Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð°, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‚Ñ‹ Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚Ð° Ð˜Ð¢ÐœÐž Ð¼Ð¾Ð³ÑƒÑ‚ "
            "Ð¾Ñ„Ð¾Ñ€Ð¼Ð¸Ñ‚ÑŒ ÑÐ¾Ð±ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚Ð°Ð¿ Ð² ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ð²Ñ‹Ð¿ÑƒÑÐºÐ½Ð¾Ð¹ ÐºÐ²Ð°Ð»Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¾Ð½Ð½Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹?\n"
            "1. Startup as Art\n"
            "2. IGoStartup\n"
            "3. Startup as Thesis\n"
            "4. ITMO Business Incubator"
        ),
        "expected_answer": 3  # Startup as Thesis
    },
    {
        "id": 13,
        "query": (
            "Ð’ ÐºÐ°ÐºÐ¾Ð¹ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸ ITMO Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸Ñ‡Ð°Ð» Ñ Ð­Ñ€Ð¼Ð¸Ñ‚Ð°Ð¶ÐµÐ¼, Ñ€Ð°Ð·Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ñ AR/VR-Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸?\n"
            "1. ÐŸÑ€Ð¾ÐµÐºÑ‚ Â«Ð¦Ð¸Ñ„Ñ€Ð¾Ð²Ð°Ñ Ð­Ñ€Ð¼Ð¸Ñ‚Ð°Ð¶-Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°Â»\n"
            "2. Art&Science Project\n"
            "3. Hermitage.Connected\n"
            "4. Museum Vision Initiative"
        ),
        "expected_answer": 3  # Hermitage.Connected
    },
    {
        "id": 14,
        "query": (
            "ÐšÐ°ÐºÑƒÑŽ Ð»Ð°Ð±Ð¾Ñ€Ð°Ñ‚Ð¾Ñ€Ð¸ÑŽ (Ð»Ð°Ð±Ð¾Ñ€Ð°Ñ‚Ð¾Ñ€Ð¸ÑŽ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð³Ð¾ Ð·Ð´Ñ€Ð°Ð²Ð¾Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ) Ð¼Ð¾Ð¶Ð½Ð¾ Ð½Ð°Ð¹Ñ‚Ð¸ Ð² Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚Ðµ Ð˜Ð¢ÐœÐž?\n"
            "1. Ð›Ð°Ð±Ð¾Ñ€Ð°Ñ‚Ð¾Ñ€Ð¸Ñ Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ð¾Ð¹ Ð¼ÐµÐ´Ð¸Ñ†Ð¸Ð½Ñ‹\n"
            "2. eHealth Lab\n"
            "3. Smart Health IT\n"
            "4. ITMO Health & AI"
        ),
        "expected_answer": 2  # eHealth Lab
    },
    {
        "id": 15,
        "query": (
            "Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¼ÐµÐ³Ð°Ð³Ñ€Ð°Ð½Ñ‚Ð¾Ð² (Ð¿Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ð¼ Ð½Ð° 2022 Ð³Ð¾Ð´) Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð¾ Ñ ÑƒÑ‡Ð°ÑÑ‚Ð¸ÐµÐ¼ ÑƒÑ‡Ñ‘Ð½Ñ‹Ñ… "
            "Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚Ð° Ð˜Ð¢ÐœÐž (Ð² Ñ€Ð°Ð¼ÐºÐ°Ñ… Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹ ÐŸÑ€Ð°Ð²Ð¸Ñ‚ÐµÐ»ÑŒÑÑ‚Ð²Ð° Ð Ð¤)?\n"
            "1. ÐœÐµÐ½ÐµÐµ 5\n"
            "2. ÐžÑ‚ 5 Ð´Ð¾ 10\n"
            "3. ÐžÑ‚ 10 Ð´Ð¾ 15\n"
            "4. Ð‘Ð¾Ð»ÐµÐµ 15"
        ),
        "expected_answer": 2  # ÐŸÐ¾ Ð´Ð°Ð½Ð½Ñ‹Ð¼ Ð˜Ð¢ÐœÐž ~ 8 Ð¼ÐµÐ³Ð°Ð³Ñ€Ð°Ð½Ñ‚Ð¾Ð² (Ð² Ñ€Ð°Ð·Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ) 
    },
    {
        "id": 16,
        "query": "Ð’ ÐºÐ°ÐºÐ¾Ð¼ Ð³Ð¾Ð´Ñƒ Ð±Ñ‹Ð» Ð¾ÑÐ½Ð¾Ð²Ð°Ð½ Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ¸Ñ‚ÐµÑ‚ Ð˜Ð¢ÐœÐž?",
        "expected_answer": None  # ÐÐµÑ‚ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð² -> answer = None
    },
    {
        "id": 17,
        "query": "ÐšÐ°ÐºÐ¾Ð²Ð° Ð¾ÑÐ½Ð¾Ð²Ð½Ð°Ñ Ñ†ÐµÐ»ÑŒ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹ 'ÐÐ°ÑƒÑ‡Ð½Ð°Ñ Ð²ÐµÑÐ½Ð°' Ð² Ð˜Ð¢ÐœÐž?",
        "expected_answer": None  # ÐÐµÑ‚ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð² -> answer = None
    }
]

# ÐžÐ±Ñ€ÐµÐ·Ð°ÐµÐ¼ Ñ‚ÐµÑÑ‚Ñ‹ Ð´Ð¾ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð° NUM_TESTS
test_cases = test_cases[:NUM_TESTS]

# Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ñ‚Ð°Ð¹Ð¼ÐµÑ€
start_time = time.time()

# Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
correct = 0
incorrect = 0
detailed_results = []

# Ð—Ð°Ð¿ÑƒÑÐº Ñ‚ÐµÑÑ‚Ð¾Ð²
for test in test_cases:
    print("\n=== Running Test ===")
    print(f"ðŸ“ Test ID: {test['id']}")
    print("ðŸ” Question:", test['query'].split("\n")[0], "\n")

    response = requests.post(BOT_URL, json={"query": test["query"], "id": test["id"]})
    
    if response.status_code == 200:
        data = response.json()
        bot_answer = data.get("answer")
        reasoning = data.get("reasoning", "No reasoning provided")
        sources = data.get("sources", [])

        # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¾Ñ‚Ð²ÐµÑ‚Ð°
        is_correct = bot_answer == test["expected_answer"]
        if is_correct:
            correct += 1
        else:
            incorrect += 1

        # Ð›Ð¾Ð³ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²
        detailed_results.append({
            "id": test["id"],
            "question": test["query"].split("\n")[0],  # Ð‘ÐµÑ€Ñ‘Ð¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚ÐµÐºÑÑ‚ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ°
            "expected": test["expected_answer"],
            "received": bot_answer,
            "status": "âœ… Correct" if is_correct else "âŒ Incorrect"
        })

        # Ð’Ñ‹Ð²Ð¾Ð´ Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð»Ð¾Ð³Ð°
        print(f"âœ… API Response: {json.dumps(data, indent=2, ensure_ascii=False)}")

    else:
        incorrect += 1
        detailed_results.append({
            "id": test["id"],
            "question": test["query"].split("\n")[0],
            "expected": test["expected_answer"],
            "received": f"Error {response.status_code}",
            "status": "âŒ API Error"
        })

        # Ð’Ñ‹Ð²Ð¾Ð´ Ð¾ÑˆÐ¸Ð±ÐºÐ¸
        print(f"âŒ API Error: {response.status_code}")

# ÐžÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ‚Ð°Ð¹Ð¼ÐµÑ€
end_time = time.time()
total_time = end_time - start_time

# Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ñ‹Ð¹ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚
print("\n=== Test Results ===")
print(f"âœ… Correct: {correct}")
print(f"âŒ Incorrect: {incorrect}")
print(f"â³ Total execution time: {total_time:.2f} seconds\n")

# Ð’Ñ‹Ñ…Ð¾Ð´ Ñ ÐºÐ¾Ð´Ð¾Ð¼ Ð¾ÑˆÐ¸Ð±ÐºÐ¸, ÐµÑÐ»Ð¸ Ñ‚ÐµÑÑ‚Ñ‹ Ð½Ðµ Ð¿Ñ€Ð¾Ð¹Ð´ÐµÐ½Ñ‹
if incorrect > 0:
    exit(1)
else:
    exit(0)